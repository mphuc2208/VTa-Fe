<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Ch·∫•m C√¥ng</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            width: 90%;
            max-width: 1200px;
            min-height: 600px;
        }

        .login-container {
            max-width: 400px;
            margin: 0 auto;
            padding: 40px;
            text-align: center;
        }

        .logo {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #667eea;
        }

        .login-title {
            color: #333;
            margin-bottom: 30px;
            font-size: 1.5em;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .dashboard {
            padding: 20px;
            display: none;
        }

        .dashboard.active {
            display: block;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .logout-btn {
            background: #dc3545;
            padding: 8px 20px;
            font-size: 14px;
            width: auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-card .number {
            font-size: 2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .attendance-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            text-align: center;
        }

        .time-display {
            font-size: 3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
        }

        .attendance-btns {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .check-in-btn {
            background: #28a745;
        }

        .check-out-btn {
            background: #dc3545;
        }

        .status-display {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
        }

        .status-in {
            background: #d4edda;
            color: #155724;
        }

        .status-out {
            background: #f8d7da;
            color: #721c24;
        }

        .records-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .records-title {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.5em;
        }

        .records-table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 8px;
            overflow: hidden;
        }

        .records-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
        }

        .records-table td {
            padding: 15px;
            border-bottom: 1px solid #e1e1e1;
        }

        .records-table tr:hover {
            background: #f8f9fa;
        }

        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-btn {
            background: #f8f9fa;
            border: 2px solid #e1e1e1;
            color: #333;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            width: auto;
        }

        .tab-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .employee-form {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .add-employee-btn {
            background: #28a745;
            width: auto;
            padding: 10px 20px;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .demo-info {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }

        .salary-period-info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .container {
                width: 95%;
                margin: 10px;
            }
            
            .attendance-btns {
                flex-direction: column;
            }
            
            .time-display {
                font-size: 2em;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .records-table {
                font-size: 12px;
            }
            
            .records-table th,
            .records-table td {
                padding: 8px 4px;
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Section -->
        <div id="loginSection" class="login-container">
            <div class="logo">‚è∞</div>
            <h2 class="login-title">H·ªá Th·ªëng Ch·∫•m C√¥ng</h2>
            
            <div class="demo-info">
                <strong>‚ö†Ô∏è L∆∞u √Ω:</strong> localStorage kh√¥ng ho·∫°t ƒë·ªông trong m√¥i tr∆∞·ªùng Claude.ai. 
                ƒê·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu, vui l√≤ng copy code n√†y v√† ch·∫°y tr√™n web server th·ª±c t·∫ø.<br><br>
                <strong>Demo Account:</strong><br>
                Admin: admin/admin (Qu·∫£n l√Ω to√†n b·ªô h·ªá th·ªëng)<br>
                User: user1/123456 (50,000‚Ç´/h), user2/123456 (45,000‚Ç´/h)
            </div>

            <div class="form-group">
                <label>T√™n ƒëƒÉng nh·∫≠p:</label>
                <input type="text" id="username" placeholder="Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p">
            </div>
            
            <div class="form-group">
                <label>M·∫≠t kh·∫©u:</label>
                <input type="password" id="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
            </div>
            
            <button class="btn" onclick="login()">ƒêƒÉng Nh·∫≠p</button>
        </div>

        <!-- User Dashboard -->
        <div id="userDashboard" class="dashboard">
            <div class="header">
                <h1>Ch·∫•m C√¥ng Nh√¢n Vi√™n</h1>
                <div class="user-info">
                    <div class="avatar" id="userAvatar"></div>
                    <div>
                        <div id="userName" style="font-weight: bold;"></div>
                        <div id="userRole" style="color: #666; font-size: 14px;"></div>
                    </div>
                    <button class="btn logout-btn" onclick="logout()">ƒêƒÉng Xu·∫•t</button>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>H√¥m Nay</h3>
                    <div class="number" id="todayHours">0h</div>
                    <div>Gi·ªù l√†m vi·ªác</div>
                </div>
                <div class="stat-card">
                    <h3>Tu·∫ßn N√†y</h3>
                    <div class="number" id="weekHours">0h</div>
                    <div>T·ªïng gi·ªù</div>
                </div>
                <div class="stat-card">
                    <h3>Th√°ng N√†y</h3>
                    <div class="number" id="monthHours">0h</div>
                    <div>T·ªïng gi·ªù</div>
                </div>
                <div class="stat-card">
                    <h3>L∆∞∆°ng Th√°ng N√†y</h3>
                    <div class="number" id="monthSalary">0‚Ç´</div>
                    <div>∆Ø·ªõc t√≠nh</div>
                </div>
            </div>

            <div class="attendance-section">
                <div class="time-display" id="currentTime"></div>
                <div id="attendanceStatus" class="status-display status-out">Ch∆∞a ch·∫•m c√¥ng v√†o</div>
                <div class="attendance-btns">
                    <button class="btn check-in-btn" id="checkInBtn" onclick="checkIn()">Ch·∫•m C√¥ng V√†o</button>
                    <button class="btn check-out-btn" id="checkOutBtn" onclick="checkOut()" disabled>Ch·∫•m C√¥ng Ra</button>
                </div>
            </div>

            <div class="records-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3 class="records-title">L·ªãch S·ª≠ Ch·∫•m C√¥ng</h3>
                    <button class="btn" style="background: #17a2b8; width: auto; padding: 8px 16px;" onclick="exportUserAttendanceExcel()">
                        üìä Xu·∫•t Excel
                    </button>
                </div>
                <table class="records-table">
                    <thead>
                        <tr>
                            <th>Ng√†y</th>
                            <th>Gi·ªù V√†o</th>
                            <th>Gi·ªù Ra</th>
                            <th>T·ªïng Gi·ªù</th>
                        </tr>
                    </thead>
                    <tbody id="userRecords">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="adminDashboard" class="dashboard">
            <div class="header">
                <h1>Qu·∫£n Tr·ªã H·ªá Th·ªëng</h1>
                <div class="user-info">
                    <div class="avatar">A</div>
                    <div>
                        <div style="font-weight: bold;">Administrator</div>
                        <div style="color: #666; font-size: 14px;">Qu·∫£n tr·ªã vi√™n</div>
                    </div>
                    <button class="btn logout-btn" onclick="logout()">ƒêƒÉng Xu·∫•t</button>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>T·ªïng Nh√¢n Vi√™n</h3>
                    <div class="number" id="totalEmployees">0</div>
                    <div>Ng∆∞·ªùi</div>
                </div>
                <div class="stat-card">
                    <h3>ƒêang L√†m Vi·ªác</h3>
                    <div class="number" id="activeEmployees">0</div>
                    <div>Ng∆∞·ªùi</div>
                </div>
                <div class="stat-card">
                    <h3>H√¥m Nay</h3>
                    <div class="number" id="todayAttendance">0</div>
                    <div>L∆∞·ª£t ch·∫•m c√¥ng</div>
                </div>
            </div>

            <div class="admin-tabs">
                <button class="tab-btn active" onclick="showTab('employees')">Qu·∫£n L√Ω Nh√¢n Vi√™n</button>
                <button class="tab-btn" onclick="showTab('salary')">Qu·∫£n L√Ω L∆∞∆°ng</button>
                <button class="tab-btn" onclick="showTab('attendance')">B√°o C√°o Ch·∫•m C√¥ng</button>
            </div>

            <div id="employeesTab" class="tab-content active">
                <div class="employee-form">
                    <h3 style="margin-bottom: 15px;">Th√™m Nh√¢n Vi√™n M·ªõi</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>T√™n nh√¢n vi√™n:</label>
                            <input type="text" id="newEmployeeName" placeholder="Nh·∫≠p t√™n">
                        </div>
                        <div class="form-group">
                            <label>T√™n ƒëƒÉng nh·∫≠p:</label>
                            <input type="text" id="newEmployeeUsername" placeholder="Nh·∫≠p username">
                        </div>
                        <div class="form-group">
                            <label>M·∫≠t kh·∫©u:</label>
                            <input type="password" id="newEmployeePassword" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
                        </div>
                        <div class="form-group">
                            <label>Ch·ª©c v·ª•:</label>
                            <input type="text" id="newEmployeePosition" placeholder="Ch·ª©c v·ª•">
                        </div>
                        <div class="form-group">
                            <label>L∆∞∆°ng/gi·ªù (VNƒê):</label>
                            <input type="number" id="newEmployeeRate" placeholder="50000">
                        </div>
                    </div>
                    <button class="btn add-employee-btn" onclick="addEmployee()">Th√™m Nh√¢n Vi√™n</button>
                </div>

                <div class="records-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 class="records-title">Danh S√°ch Nh√¢n Vi√™n</h3>
                        <button class="btn" style="background: #28a745; width: auto; padding: 8px 16px;" onclick="exportEmployeesExcel()">
                            üìä Xu·∫•t Excel
                        </button>
                    </div>
                    <table class="records-table">
                        <thead>
                            <tr>
                                <th>T√™n</th>
                                <th>Username</th>
                                <th>Ch·ª©c V·ª•</th>
                                <th>L∆∞∆°ng/Gi·ªù</th>
                                <th>Tr·∫°ng Th√°i</th>
                                <th>Thao T√°c</th>
                            </tr>
                        </thead>
                        <tbody id="employeesList">
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="salaryTab" class="tab-content">
                <div class="salary-period-info">
                    <strong>üìÖ Chu k·ª≥ t√≠nh l∆∞∆°ng:</strong> T·ª´ ng√†y 25 th√°ng tr∆∞·ªõc ƒë·∫øn ng√†y 24 th√°ng sau<br>
                    <strong>üí∞ C√¥ng th·ª©c:</strong> T·ªïng gi·ªù l√†m vi·ªác √ó L∆∞∆°ng/gi·ªù = L∆∞∆°ng th√°ng
                </div>
                
                <div class="employee-form">
                    <h3 style="margin-bottom: 15px;">C·∫≠p Nh·∫≠t L∆∞∆°ng Nh√¢n Vi√™n</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ch·ªçn nh√¢n vi√™n:</label>
                            <select id="salaryEmployeeSelect">
                                <option value="">-- Ch·ªçn nh√¢n vi√™n --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>L∆∞∆°ng/gi·ªù m·ªõi (VNƒê):</label>
                            <input type="number" id="newSalaryRate" placeholder="50000">
                        </div>
                    </div>
                    <button class="btn add-employee-btn" onclick="updateEmployeeSalary()">C·∫≠p Nh·∫≠t L∆∞∆°ng</button>
                </div>

                <div class="records-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 class="records-title">B·∫£ng L∆∞∆°ng Th√°ng</h3>
                        <button class="btn" style="background: #28a745; width: auto; padding: 8px 16px;" onclick="exportSalaryExcel()">
                            üí∞ Xu·∫•t Excel L∆∞∆°ng
                        </button>
                    </div>
                    <div class="form-row" style="margin-bottom: 20px;">
                        <div class="form-group">
                            <label>Ch·ªçn th√°ng:</label>
                            <input type="month" id="salaryReportMonth" onchange="updateSalaryReport()">
                        </div>
                    </div>
                    <table class="records-table">
                        <thead>
                            <tr>
                                <th>Nh√¢n Vi√™n</th>
                                <th>L∆∞∆°ng/Gi·ªù</th>
                                <th>T·ªïng Gi·ªù</th>
                                <th>L∆∞∆°ng C∆° B·∫£n</th>
                                <th>Th∆∞·ªüng/Ph·∫°t</th>
                                <th>T·ªïng L∆∞∆°ng</th>
                            </tr>
                        </thead>
                        <tbody id="salaryReport">
                        </tbody>
                    </table>
                    <div style="margin-top: 20px; text-align: right;">
                        <h3>T·ªïng chi ph√≠ l∆∞∆°ng: <span id="totalSalaryCost">0‚Ç´</span></h3>
                    </div>
                </div>
            </div>

            <div id="attendanceTab" class="tab-content">
                <div class="records-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 class="records-title">B√°o C√°o Ch·∫•m C√¥ng H√¥m Nay</h3>
                        <div>
                            <button class="btn" style="background: #17a2b8; width: auto; padding: 8px 16px; margin-right: 10px;" onclick="exportAttendanceExcel()">
                                üìã Xu·∫•t Excel H√¥m Nay
                            </button>
                            <button class="btn" style="background: #6f42c1; width: auto; padding: 8px 16px;" onclick="exportAllAttendanceExcel()">
                                üìä Xu·∫•t T·∫•t C·∫£
                            </button>
                        </div>
                    </div>
                    <table class="records-table">
                        <thead>
                            <tr>
                                <th>Nh√¢n Vi√™n</th>
                                <th>Gi·ªù V√†o</th>
                                <th>Gi·ªù Ra</th>
                                <th>T·ªïng Gi·ªù</th>
                                <th>Tr·∫°ng Th√°i</th>
                            </tr>
                        </thead>
                        <tbody id="attendanceReport">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script>
        // D·ªØ li·ªáu m·∫´u trong b·ªô nh·ªõ
        let users = {
            'admin': {
                username: 'admin',
                password: 'admin',
                name: 'Administrator',
                role: 'admin',
                position: 'Qu·∫£n tr·ªã vi√™n',
                hourlyRate: 0
            },
            'user1': {
                username: 'user1',
                password: '123456',
                name: 'Nguy·ªÖn VƒÉn A',
                role: 'user',
                position: 'Nh√¢n vi√™n IT',
                hourlyRate: 50000
            },
            'user2': {
                username: 'user2',
                password: '123456',
                name: 'Tr·∫ßn Th·ªã B',
                role: 'user',
                position: 'Nh√¢n vi√™n Marketing',
                hourlyRate: 45000
            }
        };

        let attendanceRecords = [];
        let currentUser = null;

        // Data persistence functions
        function saveData() {
            try {
                localStorage.setItem('attendanceSystem_users', JSON.stringify(users));
                localStorage.setItem('attendanceSystem_records', JSON.stringify(attendanceRecords));
            } catch (error) {
                console.warn('localStorage not available in this environment');
            }
        }

        function loadData() {
            try {
                const savedUsers = localStorage.getItem('attendanceSystem_users');
                const savedRecords = localStorage.getItem('attendanceSystem_records');
                
                if (savedUsers) {
                    users = { ...users, ...JSON.parse(savedUsers) };
                }
                
                if (savedRecords) {
                    attendanceRecords = JSON.parse(savedRecords);
                }
            } catch (error) {
                console.warn('localStorage not available, using default data');
            }
        }

        // Kh·ªüi t·∫°o
        function init() {
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
            
            // Load saved data
            loadData();
            
            // Th√™m m·ªôt s·ªë d·ªØ li·ªáu m·∫´u n·∫øu ch∆∞a c√≥
            if (attendanceRecords.length === 0) {
                addSampleData();
            }
            
            // Enter key support
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && document.getElementById('loginSection').style.display !== 'none') {
                    login();
                }
            });
        }

        function addSampleData() {
            const today = new Date();
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            
            // Th√™m d·ªØ li·ªáu ch·∫•m c√¥ng m·∫´u
            attendanceRecords.push({
                username: 'user1',
                date: formatDate(yesterday),
                checkIn: '08:30',
                checkOut: '17:45',
                totalHours: 9.25
            });
            
            attendanceRecords.push({
                username: 'user2',
                date: formatDate(yesterday),
                checkIn: '09:00',
                checkOut: '18:00',
                totalHours: 9.0
            });
        }

        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('vi-VN');
            const element = document.getElementById('currentTime');
            if (element) {
                element.textContent = timeString;
            }
        }

        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (!username || !password) {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!');
                return;
            }

            const user = users[username];
            if (user && user.password === password) {
                currentUser = user;
                document.getElementById('loginSection').style.display = 'none';
                
                if (user.role === 'admin') {
                    showAdminDashboard();
                } else {
                    showUserDashboard();
                }
                
                // Clear login form
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
            } else {
                alert('T√™n ƒëƒÉng nh·∫≠p ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c!');
            }
        }

        function logout() {
            currentUser = null;
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('userDashboard').classList.remove('active');
            document.getElementById('adminDashboard').classList.remove('active');
        }

        function showUserDashboard() {
            document.getElementById('userDashboard').classList.add('active');
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userRole').textContent = currentUser.position;
            document.getElementById('userAvatar').textContent = currentUser.name.charAt(0);
            
            updateUserStats();
            updateUserRecords();
            updateAttendanceStatus();
        }

        function showAdminDashboard() {
            document.getElementById('adminDashboard').classList.add('active');
            updateAdminStats();
            updateEmployeesList();
            updateAttendanceReport();
            updateSalaryEmployeeSelect();
            
            // Set default salary report month
            const salaryReportMonth = document.getElementById('salaryReportMonth');
            if (!salaryReportMonth.value) {
                salaryReportMonth.value = formatDateToMonth(new Date());
            }
            updateSalaryReport();
        }

        function updateUserStats() {
            const today = formatDate(new Date());
            const userRecords = attendanceRecords.filter(r => r.username === currentUser.username);
            
            // T√≠nh gi·ªù h√¥m nay
            const todayRecord = userRecords.find(r => r.date === today);
            document.getElementById('todayHours').textContent = 
                todayRecord ? todayRecord.totalHours + 'h' : '0h';
            
            // T√≠nh gi·ªù tu·∫ßn n√†y
            const weekHours = userRecords
                .filter(r => isThisWeek(new Date(r.date)))
                .reduce((total, r) => total + (r.totalHours || 0), 0);
            document.getElementById('weekHours').textContent = weekHours + 'h';
            
            // T√≠nh gi·ªù th√°ng n√†y theo chu k·ª≥ 25-25
            const currentPeriod = getCurrentSalaryPeriod();
            const monthHours = userRecords
                .filter(r => {
                    const recordDate = new Date(r.date);
                    return recordDate >= currentPeriod.start && recordDate <= currentPeriod.end;
                })
                .reduce((total, r) => total + (r.totalHours || 0), 0);
            document.getElementById('monthHours').textContent = monthHours + 'h';
            
            // T√≠nh l∆∞∆°ng th√°ng n√†y
            const monthSalary = monthHours * (currentUser.hourlyRate || 0);
            document.getElementById('monthSalary').textContent = formatCurrency(monthSalary);
        }

        function updateUserRecords() {
            const tbody = document.getElementById('userRecords');
            const userRecords = attendanceRecords
                .filter(r => r.username === currentUser.username)
                .sort((a, b) => new Date(b.date) - new Date(a.date));
            
            tbody.innerHTML = userRecords.map(record => `
                <tr>
                    <td>${record.date}</td>
                    <td>${record.checkIn || '-'}</td>
                    <td>${record.checkOut || '-'}</td>
                    <td>${record.totalHours ? record.totalHours + 'h' : '-'}</td>
                </tr>
            `).join('');
        }

        function updateAttendanceStatus() {
            const today = formatDate(new Date());
            const todayRecord = attendanceRecords.find(r => 
                r.username === currentUser.username && r.date === today
            );
            
            const statusEl = document.getElementById('attendanceStatus');
            const checkInBtn = document.getElementById('checkInBtn');
            const checkOutBtn = document.getElementById('checkOutBtn');
            
            if (!todayRecord || !todayRecord.checkIn) {
                statusEl.className = 'status-display status-out';
                statusEl.textContent = 'Ch∆∞a ch·∫•m c√¥ng v√†o';
                checkInBtn.disabled = false;
                checkOutBtn.disabled = true;
            } else if (todayRecord.checkIn && !todayRecord.checkOut) {
                statusEl.className = 'status-display status-in';
                statusEl.textContent = `ƒê√£ v√†o l√∫c ${todayRecord.checkIn}`;
                checkInBtn.disabled = true;
                checkOutBtn.disabled = false;
            } else {
                statusEl.className = 'status-display status-out';
                statusEl.textContent = `ƒê√£ ra l√∫c ${todayRecord.checkOut}`;
                checkInBtn.disabled = true;
                checkOutBtn.disabled = true;
            }
        }

        function checkIn() {
            const now = new Date();
            const today = formatDate(now);
            const time = now.toTimeString().slice(0, 5);
            
            let record = attendanceRecords.find(r => 
                r.username === currentUser.username && r.date === today
            );
            
            if (!record) {
                record = {
                    username: currentUser.username,
                    date: today,
                    checkIn: time,
                    checkOut: null,
                    totalHours: 0
                };
                attendanceRecords.push(record);
            } else {
                record.checkIn = time;
            }
            
            saveData(); // Save data after change
            
            updateUserStats();
            updateUserRecords();
            updateAttendanceStatus();
            updateAdminStats();
            updateAttendanceReport();
            
            alert(`Ch·∫•m c√¥ng v√†o th√†nh c√¥ng l√∫c ${time}!`);
        }

        function checkOut() {
            const now = new Date();
            const today = formatDate(now);
            const time = now.toTimeString().slice(0, 5);
            
            const record = attendanceRecords.find(r => 
                r.username === currentUser.username && r.date === today
            );
            
            if (record && record.checkIn) {
                record.checkOut = time;
                
                // T√≠nh t·ªïng gi·ªù
                const checkInTime = new Date(`${today} ${record.checkIn}`);
                const checkOutTime = new Date(`${today} ${time}`);
                const diffHours = (checkOutTime - checkInTime) / (1000 * 60 * 60);
                record.totalHours = Math.round(diffHours * 100) / 100;
                
                saveData(); // Save data after change
                
                updateUserStats();
                updateUserRecords();
                updateAttendanceStatus();
                updateAdminStats();
                updateAttendanceReport();
                
                alert(`Ch·∫•m c√¥ng ra th√†nh c√¥ng l√∫c ${time}!\nT·ªïng gi·ªù l√†m: ${record.totalHours}h`);
            }
        }

        function updateAdminStats() {
            const totalEmployees = Object.keys(users).filter(u => users[u].role === 'user').length;
            document.getElementById('totalEmployees').textContent = totalEmployees;
            
            const today = formatDate(new Date());
            const todayRecords = attendanceRecords.filter(r => r.date === today);
            const activeEmployees = todayRecords.filter(r => r.checkIn && !r.checkOut).length;
            document.getElementById('activeEmployees').textContent = activeEmployees;
            
            const todayAttendance = todayRecords.length;
            document.getElementById('todayAttendance').textContent = todayAttendance;
        }

        function updateEmployeesList() {
            const tbody = document.getElementById('employeesList');
            const employees = Object.values(users).filter(u => u.role === 'user');
            
            tbody.innerHTML = employees.map(emp => {
                const today = formatDate(new Date());
                const todayRecord = attendanceRecords.find(r => 
                    r.username === emp.username && r.date === today
                );
                
                let status = 'Ch∆∞a v√†o';
                if (todayRecord) {
                    if (todayRecord.checkIn && todayRecord.checkOut) {
                        status = 'ƒê√£ ra';
                    } else if (todayRecord.checkIn) {
                        status = 'ƒêang l√†m';
                    }
                }
                
                return `
                    <tr>
                        <td>${emp.name}</td>
                        <td>${emp.username}</td>
                        <td>${emp.position}</td>
                        <td>${formatCurrency(emp.hourlyRate || 0)}/h</td>
                        <td>${status}</td>
                        <td>
                            <button class="delete-btn" onclick="deleteEmployee('${emp.username}')">
                                X√≥a
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function updateAttendanceReport() {
            const tbody = document.getElementById('attendanceReport');
            const today = formatDate(new Date());
            const todayRecords = attendanceRecords.filter(r => r.date === today);
            
            tbody.innerHTML = todayRecords.map(record => {
                const user = users[record.username];
                let status = 'Ch∆∞a ra';
                if (record.checkOut) {
                    status = 'Ho√†n th√†nh';
                } else if (record.checkIn) {
                    status = 'ƒêang l√†m';
                }
                
                return `
                    <tr>
                        <td>${user ? user.name : record.username}</td>
                        <td>${record.checkIn || '-'}</td>
                        <td>${record.checkOut || '-'}</td>
                        <td>${record.totalHours ? record.totalHours + 'h' : '-'}</td>
                        <td>${status}</td>
                    </tr>
                `;
            }).join('');
        }

        function showTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName + 'Tab').classList.add('active');
        }

        function addEmployee() {
            const name = document.getElementById('newEmployeeName').value;
            const username = document.getElementById('newEmployeeUsername').value;
            const password = document.getElementById('newEmployeePassword').value;
            const position = document.getElementById('newEmployeePosition').value;
            const hourlyRate = parseInt(document.getElementById('newEmployeeRate').value) || 0;
            
            if (!name || !username || !password || !position) {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!');
                return;
            }
            
            if (users[username]) {
                alert('T√™n ƒëƒÉng nh·∫≠p ƒë√£ t·ªìn t·∫°i!');
                return;
            }
            
            users[username] = {
                username: username,
                password: password,
                name: name,
                role: 'user',
                position: position,
                hourlyRate: hourlyRate
            };
            
            saveData(); // Save data after change
            
            // Clear form
            document.getElementById('newEmployeeName').value = '';
            document.getElementById('newEmployeeUsername').value = '';
            document.getElementById('newEmployeePassword').value = '';
            document.getElementById('newEmployeePosition').value = '';
            document.getElementById('newEmployeeRate').value = '';
            
            updateEmployeesList();
            updateAdminStats();
            updateSalaryEmployeeSelect();
            alert('Th√™m nh√¢n vi√™n th√†nh c√¥ng!');
        }

        function deleteEmployee(username) {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a nh√¢n vi√™n n√†y?')) {
                delete users[username];
                
                // X√≥a c√°c b·∫£n ghi ch·∫•m c√¥ng li√™n quan
                attendanceRecords = attendanceRecords.filter(r => r.username !== username);
                
                saveData(); // Save data after change
                
                updateEmployeesList();
                updateAdminStats();
                updateAttendanceReport();
                alert('X√≥a nh√¢n vi√™n th√†nh c√¥ng!');
            }
        }

        // Salary Management Functions
        function updateSalaryEmployeeSelect() {
            const select = document.getElementById('salaryEmployeeSelect');
            const employees = Object.values(users).filter(u => u.role === 'user');
            
            select.innerHTML = '<option value="">-- Ch·ªçn nh√¢n vi√™n --</option>' +
                employees.map(emp => 
                    `<option value="${emp.username}">${emp.name} (${formatCurrency(emp.hourlyRate || 0)}/h)</option>`
                ).join('');
        }

        function updateEmployeeSalary() {
            const username = document.getElementById('salaryEmployeeSelect').value;
            const newRate = parseInt(document.getElementById('newSalaryRate').value);
            
            if (!username || !newRate) {
                alert('Vui l√≤ng ch·ªçn nh√¢n vi√™n v√† nh·∫≠p l∆∞∆°ng m·ªõi!');
                return;
            }
            
            if (users[username]) {
                users[username].hourlyRate = newRate;
                saveData(); // Save data after change
                
                updateEmployeesList();
                updateSalaryEmployeeSelect();
                updateSalaryReport();
                alert(`ƒê√£ c·∫≠p nh·∫≠t l∆∞∆°ng cho ${users[username].name}: ${formatCurrency(newRate)}/gi·ªù`);
                
                // Clear form
                document.getElementById('salaryEmployeeSelect').value = '';
                document.getElementById('newSalaryRate').value = '';
            }
        }

        function updateSalaryReport() {
            const monthInput = document.getElementById('salaryReportMonth');
            if (!monthInput.value) {
                monthInput.value = formatDateToMonth(new Date());
            }
            
            const [year, month] = monthInput.value.split('-');
            const period = getSalaryPeriod(parseInt(year), parseInt(month));
            
            const tbody = document.getElementById('salaryReport');
            const employees = Object.values(users).filter(u => u.role === 'user');
            let totalCost = 0;
            
            tbody.innerHTML = employees.map(emp => {
                const employeeRecords = attendanceRecords.filter(r => 
                    r.username === emp.username &&
                    new Date(r.date) >= period.start &&
                    new Date(r.date) <= period.end
                );
                
                const totalHours = employeeRecords.reduce((total, r) => total + (r.totalHours || 0), 0);
                const basicSalary = totalHours * (emp.hourlyRate || 0);
                const bonus = 0; // C√≥ th·ªÉ m·ªü r·ªông th√™m t√≠nh nƒÉng th∆∞·ªüng ph·∫°t
                const totalSalary = basicSalary + bonus;
                
                totalCost += totalSalary;
                
                return `
                    <tr>
                        <td>${emp.name}</td>
                        <td>${formatCurrency(emp.hourlyRate || 0)}</td>
                        <td>${totalHours.toFixed(1)}h</td>
                        <td>${formatCurrency(basicSalary)}</td>
                        <td>${formatCurrency(bonus)}</td>
                        <td><strong>${formatCurrency(totalSalary)}</strong></td>
                    </tr>
                `;
            }).join('');
            
            document.getElementById('totalSalaryCost').textContent = formatCurrency(totalCost);
        }

        function getCurrentSalaryPeriod() {
            const now = new Date();
            return getSalaryPeriod(now.getFullYear(), now.getMonth() + 1);
        }

        function getSalaryPeriod(year, month) {
            const startDate = new Date(year, month - 1, 25);
            if (startDate > new Date()) {
                startDate.setMonth(startDate.getMonth() - 1);
            }
            
            const endDate = new Date(startDate);
            endDate.setMonth(endDate.getMonth() + 1);
            endDate.setDate(24);
            
            return {
                start: startDate,
                end: endDate
            };
        }

        // Excel Export Functions
        function exportEmployeesExcel() {
            const employees = Object.values(users).filter(u => u.role === 'user');
            
            try {
                const wsData = [
                    ['STT', 'T√™n Nh√¢n Vi√™n', 'Username', 'Ch·ª©c V·ª•', 'L∆∞∆°ng/Gi·ªù (VNƒê)', 'Tr·∫°ng Th√°i'],
                    ...employees.map((emp, index) => {
                        const today = formatDate(new Date());
                        const todayRecord = attendanceRecords.find(r => 
                            r.username === emp.username && r.date === today
                        );
                        
                        let status = 'Ch∆∞a v√†o';
                        if (todayRecord) {
                            if (todayRecord.checkIn && todayRecord.checkOut) {
                                status = 'ƒê√£ ra';
                            } else if (todayRecord.checkIn) {
                                status = 'ƒêang l√†m';
                            }
                        }
                        
                        return [
                            index + 1,
                            emp.name,
                            emp.username,
                            emp.position,
                            emp.hourlyRate || 0,
                            status
                        ];
                    })
                ];
                
                const wb = XLSX.utils.book_new();
                const ws = XLSX.utils.aoa_to_sheet(wsData);
                
                // Set column widths
                ws['!cols'] = [
                    { width: 5 }, { width: 20 }, { width: 15 }, 
                    { width: 20 }, { width: 15 }, { width: 12 }
                ];
                
                XLSX.utils.book_append_sheet(wb, ws, 'Danh S√°ch Nh√¢n Vi√™n');
                XLSX.writeFile(wb, `Danh_Sach_Nhan_Vien_${formatDate(new Date())}.xlsx`);
                alert('ƒê√£ xu·∫•t danh s√°ch nh√¢n vi√™n th√†nh c√¥ng!');
            } catch (error) {
                console.error('L·ªói xu·∫•t Excel:', error);
                alert('C√≥ l·ªói khi xu·∫•t file Excel: ' + error.message);
            }
        }

        function exportAttendanceExcel() {
            const today = formatDate(new Date());
            const todayRecords = attendanceRecords.filter(r => r.date === today);
            
            try {
                const wsData = [
                    ['STT', 'Nh√¢n Vi√™n', 'Ng√†y', 'Gi·ªù V√†o', 'Gi·ªù Ra', 'T·ªïng Gi·ªù', 'L∆∞∆°ng/Gi·ªù', 'Th√†nh Ti·ªÅn'],
                    ...todayRecords.map((record, index) => {
                        const user = users[record.username];
                        const amount = (record.totalHours || 0) * (user?.hourlyRate || 0);
                        
                        return [
                            index + 1,
                            user ? user.name : record.username,
                            record.date,
                            record.checkIn || '',
                            record.checkOut || '',
                            record.totalHours || 0,
                            user?.hourlyRate || 0,
                            amount
                        ];
                    })
                ];
                
                const wb = XLSX.utils.book_new();
                const ws = XLSX.utils.aoa_to_sheet(wsData);
                
                // Set column widths
                ws['!cols'] = [
                    { width: 5 }, { width: 20 }, { width: 12 }, 
                    { width: 10 }, { width: 10 }, { width: 10 },
                    { width: 15 }, { width: 15 }
                ];
                
                XLSX.utils.book_append_sheet(wb, ws, 'Ch·∫•m C√¥ng H√¥m Nay');
                XLSX.writeFile(wb, `Cham_Cong_${today}.xlsx`);
                alert('ƒê√£ xu·∫•t b√°o c√°o ch·∫•m c√¥ng h√¥m nay th√†nh c√¥ng!');
            } catch (error) {
                console.error('L·ªói xu·∫•t Excel:', error);
                alert('C√≥ l·ªói khi xu·∫•t file Excel: ' + error.message);
            }
        }

        function exportAllAttendanceExcel() {
            const employees = Object.values(users).filter(u => u.role === 'user');
            
            try {
                const wb = XLSX.utils.book_new();
                
                // Create summary sheet
                const summaryData = [
                    ['STT', 'Nh√¢n Vi√™n', 'Username', 'Ch·ª©c V·ª•', 'L∆∞∆°ng/Gi·ªù', 'T·ªïng Gi·ªù L√†m', 'T·ªïng L∆∞∆°ng'],
                    ...employees.map((emp, index) => {
                        const empRecords = attendanceRecords.filter(r => r.username === emp.username);
                        const totalHours = empRecords.reduce((sum, r) => sum + (r.totalHours || 0), 0);
                        const totalSalary = totalHours * (emp.hourlyRate || 0);
                        
                        return [
                            index + 1,
                            emp.name,
                            emp.username,
                            emp.position,
                            emp.hourlyRate || 0,
                            parseFloat(totalHours.toFixed(2)),
                            totalSalary
                        ];
                    })
                ];
                
                const summaryWs = XLSX.utils.aoa_to_sheet(summaryData);
                summaryWs['!cols'] = [
                    { width: 5 }, { width: 20 }, { width: 15 }, 
                    { width: 20 }, { width: 15 }, { width: 12 }, { width: 15 }
                ];
                XLSX.utils.book_append_sheet(wb, summaryWs, 'T·ªïng H·ª£p');
                
                // Create individual sheets for each employee
                employees.forEach(emp => {
                    const empRecords = attendanceRecords
                        .filter(r => r.username === emp.username)
                        .sort((a, b) => new Date(b.date) - new Date(a.date));
                    
                    const empData = [
                        ['STT', 'Ng√†y', 'Gi·ªù V√†o', 'Gi·ªù Ra', 'T·ªïng Gi·ªù', 'Th√†nh Ti·ªÅn'],
                        ...empRecords.map((record, index) => [
                            index + 1,
                            record.date,
                            record.checkIn || '',
                            record.checkOut || '',
                            record.totalHours || 0,
                            (record.totalHours || 0) * (emp.hourlyRate || 0)
                        ])
                    ];
                    
                    const empWs = XLSX.utils.aoa_to_sheet(empData);
                    empWs['!cols'] = [
                        { width: 5 }, { width: 12 }, { width: 10 }, 
                        { width: 10 }, { width: 10 }, { width: 15 }
                    ];
                    
                    // Sanitize sheet name (remove special characters and limit length)
                    const sheetName = emp.name.replace(/[^a-zA-Z0-9\u00C0-\u017F\u1EA0-\u1EF9 ]/g, '').substring(0, 25);
                    XLSX.utils.book_append_sheet(wb, empWs, sheetName || `NV_${emp.username}`);
                });
                
                XLSX.writeFile(wb, `Bao_Cao_Cham_Cong_Tong_Hop_${formatDate(new Date())}.xlsx`);
                alert('ƒê√£ xu·∫•t b√°o c√°o t·ªïng h·ª£p th√†nh c√¥ng!');
            } catch (error) {
                console.error('L·ªói xu·∫•t Excel:', error);
                alert('C√≥ l·ªói khi xu·∫•t file Excel: ' + error.message);
            }
        }

        function exportSalaryExcel() {
            const monthInput = document.getElementById('salaryReportMonth');
            const [year, month] = monthInput.value.split('-');
            const period = getSalaryPeriod(parseInt(year), parseInt(month));
            
            const employees = Object.values(users).filter(u => u.role === 'user');
            let totalCost = 0;
            
            try {
                const wsData = [
                    ['STT', 'Nh√¢n Vi√™n', 'Username', 'Ch·ª©c V·ª•', 'L∆∞∆°ng/Gi·ªù', 'T·ªïng Gi·ªù', 'L∆∞∆°ng C∆° B·∫£n', 'Th∆∞·ªüng/Ph·∫°t', 'T·ªïng L∆∞∆°ng'],
                    ...employees.map((emp, index) => {
                        const employeeRecords = attendanceRecords.filter(r => 
                            r.username === emp.username &&
                            new Date(r.date) >= period.start &&
                            new Date(r.date) <= period.end
                        );
                        
                        const totalHours = employeeRecords.reduce((total, r) => total + (r.totalHours || 0), 0);
                        const basicSalary = totalHours * (emp.hourlyRate || 0);
                        const bonus = 0;
                        const totalSalary = basicSalary + bonus;
                        
                        totalCost += totalSalary;
                        
                        return [
                            index + 1,
                            emp.name,
                            emp.username,
                            emp.position,
                            emp.hourlyRate || 0,
                            parseFloat(totalHours.toFixed(1)),
                            basicSalary,
                            bonus,
                            totalSalary
                        ];
                    })
                ];
                
                // Add total row
                wsData.push([
                    '', '', '', '', '', '', '', 'T·ªîNG:', totalCost
                ]);
                
                const wb = XLSX.utils.book_new();
                const ws = XLSX.utils.aoa_to_sheet(wsData);
                
                // Set column widths
                ws['!cols'] = [
                    { width: 5 }, { width: 20 }, { width: 15 }, { width: 20 }, 
                    { width: 15 }, { width: 10 }, { width: 15 }, { width: 12 }, { width: 15 }
                ];
                
                XLSX.utils.book_append_sheet(wb, ws, `B·∫£ng L∆∞∆°ng ${month}-${year}`);
                XLSX.writeFile(wb, `Bang_Luong_${month}_${year}.xlsx`);
                alert('ƒê√£ xu·∫•t file Excel l∆∞∆°ng th√†nh c√¥ng!');
            } catch (error) {
                console.error('L·ªói xu·∫•t Excel:', error);
                alert('C√≥ l·ªói khi xu·∫•t file Excel: ' + error.message);
            }
        }

        function exportUserAttendanceExcel() {
            const userRecords = attendanceRecords
                .filter(r => r.username === currentUser.username)
                .sort((a, b) => new Date(b.date) - new Date(a.date));
            
            try {
                const wsData = [
                    ['STT', 'Ng√†y', 'Gi·ªù V√†o', 'Gi·ªù Ra', 'T·ªïng Gi·ªù', 'L∆∞∆°ng/Gi·ªù', 'Th√†nh Ti·ªÅn'],
                    ...userRecords.map((record, index) => [
                        index + 1,
                        record.date,
                        record.checkIn || '',
                        record.checkOut || '',
                        record.totalHours || 0,
                        currentUser.hourlyRate || 0,
                        (record.totalHours || 0) * (currentUser.hourlyRate || 0)
                    ])
                ];
                
                // Add summary
                const totalHours = userRecords.reduce((sum, r) => sum + (r.totalHours || 0), 0);
                const totalSalary = totalHours * (currentUser.hourlyRate || 0);
                
                wsData.push([]);
                wsData.push(['', 'T·ªîNG K·∫æT:', '', '', parseFloat(totalHours.toFixed(1)), '', totalSalary]);
                
                const wb = XLSX.utils.book_new();
                const ws = XLSX.utils.aoa_to_sheet(wsData);
                
                // Set column widths
                ws['!cols'] = [
                    { width: 5 }, { width: 12 }, { width: 10 }, 
                    { width: 10 }, { width: 10 }, { width: 15 }, { width: 15 }
                ];
                
                XLSX.utils.book_append_sheet(wb, ws, 'L·ªãch S·ª≠ Ch·∫•m C√¥ng');
                XLSX.writeFile(wb, `Lich_Su_Cham_Cong_${currentUser.username}_${formatDate(new Date())}.xlsx`);
                alert('ƒê√£ xu·∫•t l·ªãch s·ª≠ ch·∫•m c√¥ng c√° nh√¢n th√†nh c√¥ng!');
            } catch (error) {
                console.error('L·ªói xu·∫•t Excel:', error);
                alert('C√≥ l·ªói khi xu·∫•t file Excel: ' + error.message);
            }
        }

        // Utility functions
        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }

        function isThisWeek(date) {
            const now = new Date();
            const weekStart = new Date(now);
            weekStart.setDate(now.getDate() - now.getDay());
            const weekEnd = new Date(weekStart);
            weekEnd.setDate(weekStart.getDate() + 6);
            
            return date >= weekStart && date <= weekEnd;
        }

        function isThisMonth(date) {
            const now = new Date();
            return date.getMonth() === now.getMonth() && date.getFullYear() === now.getFullYear();
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('vi-VN', {
                style: 'currency',
                currency: 'VND'
            }).format(amount);
        }

        function formatDateToMonth(date) {
            return date.toISOString().slice(0, 7);
        }

        // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
        init();
    </script>
</body>
</html>